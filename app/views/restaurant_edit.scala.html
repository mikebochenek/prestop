@(form: Form[(String,String,String,String,String,String,String,String,String,String,String,String,String,String,String,String,String)], restaurant: Restaurant, url: String, logourl: String, tags: String, cuisines: String, reservations: Seq[Reservation], children: Seq[Restaurant])(implicit flash: Flash, session: Session, lang: Lang)

@main(title = "settings") {

<div class="container">

    @helper.form(routes.Restaurants.save) {

  <div class="starter-template">
    <h3>Restaurant Info</h3>

      <div class="row ">
        <div class="col-sm-8 col-md-offset-2">
          <input class="hidden form-control span4" type="text" name="id" id="id" value="@restaurant.id">
          
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Name</span>
            <input class="form-control span4" type="text" name="name" id="name" value="@restaurant.name">
          </div>
                      
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Address</span>
            <input class="form-control span4" type="text" name="address" id="address" value="@restaurant.address">
          </div>
          
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Postal Code</span>
            <input class="form-control span4" type="text" name="postalcode" id="postalcode" value="@restaurant.misc.postalcode">
          </div>
                      
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">City</span>
            <input class="form-control span4" type="text" name="city" id="city" value="@restaurant.city">
          </div>
                      
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">State</span>
            <input class="form-control span4" type="text" name="state" id="state" value="@restaurant.state">
          </div>
                      
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Country</span>
            <input class="form-control span4" type="text" name="country" id="country" value="@restaurant.misc.country">
          </div>
                      
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Latitude, Longitude</span>
            <input class="form-control span4" type="text" name="latitudelongitude" id="latitudelongitude" value="@restaurant.latitude, @restaurant.longitude">
          </div>

          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Google Places ID</span>
            <input class="form-control span4" type="text" name="google_places_id" id="google_places_id" value="@restaurant.misc.place_id">
          </div>
          
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Phone</span>
            <input class="form-control span4" type="phone" name="phone" id="city" value="@restaurant.phone">
          </div>
                      
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Email</span>
            <input class="form-control span4" type="text" name="email" id="email" value="@restaurant.email">
          </div>
                      
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Website</span>
            <input class="form-control span4" type="text" name="website" id="website" value="@restaurant.website">
          </div>
          
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Schedule</span>
            <textarea class="form-control span4" type="text" name="schedule" id="schedule" cols=80 rows=7>@restaurant.schedule</textarea> 
          </div>
          <div>&emsp;according to the schedule above, <b>openNow=@common.RecommendationUtils.checkSchedule(restaurant.schedule)</b></div>
          
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Type</span>
            <input class="form-control span4" type="text" name="restype" id="restype" value="@restaurant.restype">
          </div>
          
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Status</span>
            <input class="form-control span4" type="text" name="status" id="status" value="@restaurant.status">
          </div>

          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Payment type</span>
            <input class="form-control span4" type="text" name="ptags" id="ptags" value="@tags">
          </div>
          
          <div>&emsp;<u>possible tags:</u> @Tag.findAll.filter(_.status == 12).map(_.name).mkString(", ")</div>

          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Cuisines</span>
            <input class="form-control span4" type="text" name="tags" id="tags" value="@cuisines">
          </div>
          
          <div>&emsp;<u>possible cuisines:</u> @Tag.findAll.filter(_.status == 21).map(_.name).mkString(", ")</div>
          <script>var availableTags = @Html(play.api.libs.json.Json.toJson(Tag.findAll.filter(_.status == 21).map(_.name)).toString) ;</script>
          
          </br>
                      
          <button class="span4 btn btn-primary" type="submit" id="generalsavebutton">@Messages("save")</button>
          <button class="span4 btn btn-primary" type="reset" id="generalsavebutton">reset</button>
        </div>
      </div>
	}      
      
      <h3>Photo</h3>
      
      <div class="row ">
        <div class="col-sm-8 col-md-offset-2">
                @if(url != null) {
                     <img src="@url" alt="restaurant photo" height="100" width="100"></img>
                     @for(w <- Image.resolutions) { <a href="@Image.reverseURLGen(url, w)">@w px wide</a> &nbsp&nbsp }
                  @helper.form(action = routes.Dishes.cropImage(restaurant.id, "restaurant")) {
                       <button class="span4 btn btn-primary" type="submit" id="cropbutton" >crop</button>
                  }
                  <hr>
                }
                @helper.form(action = routes.Restaurants.upload(restaurant.id), 'enctype -> "multipart/form-data") {
		            <span class="btn"><input type="file" name="picture"></span>
                    <button class="span4 btn btn-primary" type="submit" id="generalsavebutton">upload</button>
		        }
        </div>
      </div>

      <h3>Profile Picture</h3>
      
      <div class="row ">
        <div class="col-sm-8 col-md-offset-2">
                @if(logourl != null) {
                     <img src="@logourl" alt="restaurant photo" height="100" width="100"></img>
                     @for(w <- Image.resolutions) { <a href="@Image.reverseURLGen(logourl, w)">@w px wide</a> &nbsp&nbsp }
                  @helper.form(action = routes.Dishes.cropImage(restaurant.id, "restaurantProfile")) {
                       <button class="span4 btn btn-primary" type="submit" id="cropbutton" >crop</button>
                  }
                  <hr>
                }
                @helper.form(action = routes.Restaurants.uploadLogo(restaurant.id), 'enctype -> "multipart/form-data") {
		            <span class="btn"><input type="file" name="logopicture"></span>
                    <button class="span4 btn btn-primary" type="submit" id="generalsavebutton">upload</button>
                }
        </div>
      </div>

      
      <h3>Menu (dishes)</h3>

        <div data-ng-app="app" data-ng-controller="ListDishCtrl" lang="en" class="row mycenter" >
         <div class="col-sm-8 col-md-offset-2">         

          <ul class="list-group" style="text-align: left;">
            <li ng-repeat="dish in dishes | orderBy:['id']" 
                class="list-group-item"><a href="/dishedit/{{dish.id}}">
                   <img src="@routes.Assets.at("img/edit.png")" width="24px" hspace="4" />{{dish.name}} {{dish.price | currency}}</a>
            </li>
            
            <li class="list-group-item"><span ng-hide="editing" style="text-align: left;">
            <form role="form" class="animate-show" ng-show="show">
               <img src="@routes.Assets.at("img/restaurant.jpg")" width="25px" />
               <input id="donetext" name="donetext" type="text" data-ng-model="donetext" 
                      placeholder="dish name" size="60" ng-required/>
               <button data-ng-click="add()" class="btn btn-primary" type="submit">@Messages("add")</button>
            </form>
           </span>
           </li>
            
          </ul>

         </div><!-- /.col-sm-6 -->
        </div>

		<hr/>
		
     	<h3>Other locations (@children.size)</h3>
      	<table class="table table-hover">
      	  <thead>
      	    <tr>
      	       <td>ID & name</td>
      	       <td>address</td>
      	       <td>phone</td>
      	       <td>latitude</td>
      	       <td>longitude</td>
      	       <td>status</td>
      	    </tr>
      	  </thead>
      	  <tbody>
      	@for((cr, index) <- children.zipWithIndex)  {	
		  <tr>
		  <td><a href="../restaurantlocations/@cr.id"><img src="@routes.Assets.at("img/edit.png")" width="24px" hspace="4" /></a>@cr.id @cr.name</td>
		  <td>@cr.address @cr.city @cr.state</td>
		  <td>@cr.phone</td>
		  <td>@cr.latitude</td>
		  <td>@cr.longitude</td>
		  <td>@cr.status</td>
		  </tr>
		  }
      	  </tbody>
		</table>

        @helper.form(action = routes.Restaurants.addLocations(restaurant.id)) {
            <button class="span4 btn btn-primary" type="submit" id="createlocation" >Add new location</button>
        }

		<hr/>

      	<h3>Reservations (@reservations.size)</h3>
      	<table class="table table-hover">
      	  <thead>
      	    <tr>
      	       <td>user ID</td>
      	       <td>date and time</td>
      	       <td>guests</td>
      	       <td>special requests</td>
      	       <td>status</td>
      	    </tr>
      	  </thead>
      	  <tbody>
      	@for((reservation, index) <- reservations.zipWithIndex)  {	
		  <tr>
		  <td>@reservation.user_id</td>
		  <td>@reservation.reservationtime.format("dd MMM YYYY HH:MM")</td>
		  <td>@reservation.guestcount</td>
		  <td>@reservation.special_requests</td>
		  <td>@reservation.status</td>
		  </tr>
		  }
      	  </tbody>
		</table>
      
  </div>


    </div><!-- /.container -->
}